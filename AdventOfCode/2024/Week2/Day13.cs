using System;
using System.Collections.Generic;
using System.Configuration;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

namespace AdventOfCode._2024
{
    internal class Day13() : Problem("Button A: X+94, Y+34\r\nButton B: X+22, Y+67\r\nPrize: X=8400, Y=5400\r\n\r\nButton A: X+26, Y+66\r\nButton B: X+67, Y+21\r\nPrize: X=12748, Y=12176\r\n\r\nButton A: X+17, Y+86\r\nButton B: X+84, Y+37\r\nPrize: X=7870, Y=6450\r\n\r\nButton A: X+69, Y+23\r\nButton B: X+27, Y+71\r\nPrize: X=18641, Y=10279",
        "Button A: X+34, Y+88\r\nButton B: X+91, Y+11\r\nPrize: X=8217, Y=5775\r\n\r\nButton A: X+60, Y+19\r\nButton B: X+26, Y+63\r\nPrize: X=2638, Y=590\r\n\r\nButton A: X+76, Y+60\r\nButton B: X+15, Y+69\r\nPrize: X=5817, Y=5907\r\n\r\nButton A: X+19, Y+52\r\nButton B: X+50, Y+14\r\nPrize: X=13044, Y=19140\r\n\r\nButton A: X+45, Y+94\r\nButton B: X+56, Y+35\r\nPrize: X=4037, Y=4170\r\n\r\nButton A: X+84, Y+21\r\nButton B: X+11, Y+56\r\nPrize: X=8648, Y=7991\r\n\r\nButton A: X+56, Y+24\r\nButton B: X+28, Y+76\r\nPrize: X=5208, Y=6200\r\n\r\nButton A: X+34, Y+14\r\nButton B: X+52, Y+76\r\nPrize: X=17504, Y=9792\r\n\r\nButton A: X+18, Y+15\r\nButton B: X+33, Y+98\r\nPrize: X=2493, Y=6519\r\n\r\nButton A: X+48, Y+21\r\nButton B: X+21, Y+59\r\nPrize: X=1091, Y=13867\r\n\r\nButton A: X+14, Y+60\r\nButton B: X+93, Y+71\r\nPrize: X=1420, Y=2810\r\n\r\nButton A: X+12, Y+53\r\nButton B: X+70, Y+25\r\nPrize: X=3276, Y=5944\r\n\r\nButton A: X+50, Y+93\r\nButton B: X+91, Y+13\r\nPrize: X=5619, Y=1232\r\n\r\nButton A: X+84, Y+25\r\nButton B: X+55, Y+88\r\nPrize: X=10002, Y=8564\r\n\r\nButton A: X+80, Y+45\r\nButton B: X+21, Y+95\r\nPrize: X=3667, Y=2645\r\n\r\nButton A: X+96, Y+50\r\nButton B: X+36, Y+70\r\nPrize: X=7356, Y=6650\r\n\r\nButton A: X+69, Y+19\r\nButton B: X+13, Y+43\r\nPrize: X=2880, Y=6400\r\n\r\nButton A: X+63, Y+29\r\nButton B: X+43, Y+76\r\nPrize: X=7740, Y=6598\r\n\r\nButton A: X+90, Y+63\r\nButton B: X+28, Y+94\r\nPrize: X=2426, Y=4079\r\n\r\nButton A: X+95, Y+84\r\nButton B: X+16, Y+96\r\nPrize: X=6357, Y=9468\r\n\r\nButton A: X+33, Y+61\r\nButton B: X+49, Y+25\r\nPrize: X=1997, Y=825\r\n\r\nButton A: X+19, Y+96\r\nButton B: X+82, Y+70\r\nPrize: X=8917, Y=12000\r\n\r\nButton A: X+95, Y+20\r\nButton B: X+13, Y+49\r\nPrize: X=6682, Y=3211\r\n\r\nButton A: X+63, Y+11\r\nButton B: X+17, Y+22\r\nPrize: X=1988, Y=2079\r\n\r\nButton A: X+42, Y+21\r\nButton B: X+45, Y+90\r\nPrize: X=7341, Y=9138\r\n\r\nButton A: X+12, Y+46\r\nButton B: X+99, Y+46\r\nPrize: X=5427, Y=5796\r\n\r\nButton A: X+33, Y+63\r\nButton B: X+65, Y+23\r\nPrize: X=3032, Y=5384\r\n\r\nButton A: X+69, Y+37\r\nButton B: X+11, Y+70\r\nPrize: X=2047, Y=2572\r\n\r\nButton A: X+65, Y+33\r\nButton B: X+32, Y+50\r\nPrize: X=5877, Y=3355\r\n\r\nButton A: X+41, Y+68\r\nButton B: X+68, Y+22\r\nPrize: X=5134, Y=3522\r\n\r\nButton A: X+33, Y+67\r\nButton B: X+55, Y+16\r\nPrize: X=17777, Y=7480\r\n\r\nButton A: X+99, Y+15\r\nButton B: X+48, Y+54\r\nPrize: X=4005, Y=3831\r\n\r\nButton A: X+65, Y+17\r\nButton B: X+13, Y+48\r\nPrize: X=18814, Y=10722\r\n\r\nButton A: X+30, Y+99\r\nButton B: X+92, Y+40\r\nPrize: X=6466, Y=7367\r\n\r\nButton A: X+58, Y+18\r\nButton B: X+18, Y+61\r\nPrize: X=2356, Y=4056\r\n\r\nButton A: X+19, Y+66\r\nButton B: X+34, Y+12\r\nPrize: X=12645, Y=7310\r\n\r\nButton A: X+58, Y+30\r\nButton B: X+27, Y+57\r\nPrize: X=814, Y=16538\r\n\r\nButton A: X+47, Y+11\r\nButton B: X+36, Y+78\r\nPrize: X=15935, Y=17765\r\n\r\nButton A: X+22, Y+89\r\nButton B: X+43, Y+37\r\nPrize: X=3099, Y=3087\r\n\r\nButton A: X+24, Y+59\r\nButton B: X+65, Y+19\r\nPrize: X=1894, Y=8716\r\n\r\nButton A: X+34, Y+12\r\nButton B: X+28, Y+51\r\nPrize: X=1880, Y=1022\r\n\r\nButton A: X+24, Y+80\r\nButton B: X+72, Y+14\r\nPrize: X=16568, Y=3498\r\n\r\nButton A: X+11, Y+67\r\nButton B: X+69, Y+22\r\nPrize: X=10358, Y=4000\r\n\r\nButton A: X+70, Y+29\r\nButton B: X+22, Y+70\r\nPrize: X=2732, Y=2106\r\n\r\nButton A: X+46, Y+57\r\nButton B: X+73, Y+23\r\nPrize: X=3892, Y=2799\r\n\r\nButton A: X+30, Y+67\r\nButton B: X+63, Y+28\r\nPrize: X=6518, Y=1391\r\n\r\nButton A: X+61, Y+28\r\nButton B: X+11, Y+29\r\nPrize: X=4217, Y=12704\r\n\r\nButton A: X+93, Y+47\r\nButton B: X+27, Y+90\r\nPrize: X=10080, Y=9141\r\n\r\nButton A: X+12, Y+67\r\nButton B: X+79, Y+41\r\nPrize: X=1652, Y=1222\r\n\r\nButton A: X+57, Y+88\r\nButton B: X+77, Y+25\r\nPrize: X=8601, Y=8491\r\n\r\nButton A: X+19, Y+50\r\nButton B: X+75, Y+21\r\nPrize: X=8026, Y=5777\r\n\r\nButton A: X+22, Y+23\r\nButton B: X+13, Y+88\r\nPrize: X=1902, Y=4816\r\n\r\nButton A: X+13, Y+57\r\nButton B: X+67, Y+70\r\nPrize: X=617, Y=2034\r\n\r\nButton A: X+21, Y+93\r\nButton B: X+80, Y+43\r\nPrize: X=2624, Y=6640\r\n\r\nButton A: X+35, Y+14\r\nButton B: X+19, Y+64\r\nPrize: X=6793, Y=12790\r\n\r\nButton A: X+21, Y+49\r\nButton B: X+67, Y+25\r\nPrize: X=12781, Y=12039\r\n\r\nButton A: X+20, Y+13\r\nButton B: X+18, Y+36\r\nPrize: X=2614, Y=2744\r\n\r\nButton A: X+74, Y+31\r\nButton B: X+15, Y+52\r\nPrize: X=12379, Y=17509\r\n\r\nButton A: X+27, Y+57\r\nButton B: X+38, Y+23\r\nPrize: X=2892, Y=3702\r\n\r\nButton A: X+38, Y+67\r\nButton B: X+88, Y+29\r\nPrize: X=3832, Y=3224\r\n\r\nButton A: X+88, Y+37\r\nButton B: X+20, Y+89\r\nPrize: X=3704, Y=4781\r\n\r\nButton A: X+46, Y+12\r\nButton B: X+14, Y+77\r\nPrize: X=16988, Y=6492\r\n\r\nButton A: X+20, Y+43\r\nButton B: X+73, Y+50\r\nPrize: X=10444, Y=255\r\n\r\nButton A: X+99, Y+17\r\nButton B: X+78, Y+98\r\nPrize: X=13146, Y=7926\r\n\r\nButton A: X+77, Y+32\r\nButton B: X+25, Y+89\r\nPrize: X=6377, Y=4301\r\n\r\nButton A: X+49, Y+18\r\nButton B: X+35, Y+88\r\nPrize: X=7035, Y=8220\r\n\r\nButton A: X+79, Y+19\r\nButton B: X+12, Y+66\r\nPrize: X=18495, Y=12171\r\n\r\nButton A: X+49, Y+25\r\nButton B: X+27, Y+58\r\nPrize: X=13521, Y=5330\r\n\r\nButton A: X+23, Y+48\r\nButton B: X+34, Y+13\r\nPrize: X=1406, Y=17231\r\n\r\nButton A: X+18, Y+53\r\nButton B: X+33, Y+15\r\nPrize: X=14102, Y=9889\r\n\r\nButton A: X+38, Y+11\r\nButton B: X+58, Y+86\r\nPrize: X=3582, Y=19504\r\n\r\nButton A: X+28, Y+64\r\nButton B: X+95, Y+42\r\nPrize: X=6946, Y=7820\r\n\r\nButton A: X+15, Y+80\r\nButton B: X+73, Y+11\r\nPrize: X=15561, Y=2377\r\n\r\nButton A: X+43, Y+20\r\nButton B: X+62, Y+90\r\nPrize: X=3991, Y=3630\r\n\r\nButton A: X+34, Y+59\r\nButton B: X+99, Y+29\r\nPrize: X=6014, Y=2154\r\n\r\nButton A: X+61, Y+26\r\nButton B: X+19, Y+56\r\nPrize: X=15348, Y=4768\r\n\r\nButton A: X+92, Y+32\r\nButton B: X+50, Y+60\r\nPrize: X=6188, Y=4368\r\n\r\nButton A: X+84, Y+30\r\nButton B: X+12, Y+68\r\nPrize: X=6080, Y=1372\r\n\r\nButton A: X+24, Y+51\r\nButton B: X+55, Y+21\r\nPrize: X=4497, Y=8867\r\n\r\nButton A: X+83, Y+31\r\nButton B: X+22, Y+39\r\nPrize: X=4563, Y=2166\r\n\r\nButton A: X+13, Y+42\r\nButton B: X+53, Y+31\r\nPrize: X=13594, Y=5967\r\n\r\nButton A: X+68, Y+24\r\nButton B: X+14, Y+56\r\nPrize: X=5272, Y=3848\r\n\r\nButton A: X+49, Y+11\r\nButton B: X+20, Y+76\r\nPrize: X=19540, Y=10860\r\n\r\nButton A: X+27, Y+64\r\nButton B: X+33, Y+14\r\nPrize: X=9503, Y=3184\r\n\r\nButton A: X+54, Y+90\r\nButton B: X+93, Y+20\r\nPrize: X=11883, Y=9140\r\n\r\nButton A: X+14, Y+22\r\nButton B: X+99, Y+42\r\nPrize: X=3417, Y=2076\r\n\r\nButton A: X+63, Y+67\r\nButton B: X+82, Y+17\r\nPrize: X=4772, Y=3039\r\n\r\nButton A: X+48, Y+70\r\nButton B: X+74, Y+33\r\nPrize: X=8832, Y=7486\r\n\r\nButton A: X+31, Y+63\r\nButton B: X+56, Y+28\r\nPrize: X=15833, Y=14389\r\n\r\nButton A: X+17, Y+62\r\nButton B: X+83, Y+81\r\nPrize: X=1597, Y=3829\r\n\r\nButton A: X+23, Y+76\r\nButton B: X+63, Y+44\r\nPrize: X=2165, Y=5348\r\n\r\nButton A: X+23, Y+66\r\nButton B: X+47, Y+11\r\nPrize: X=3186, Y=1958\r\n\r\nButton A: X+89, Y+35\r\nButton B: X+60, Y+93\r\nPrize: X=9351, Y=4302\r\n\r\nButton A: X+63, Y+41\r\nButton B: X+28, Y+74\r\nPrize: X=6972, Y=7382\r\n\r\nButton A: X+21, Y+91\r\nButton B: X+81, Y+56\r\nPrize: X=3432, Y=7497\r\n\r\nButton A: X+53, Y+19\r\nButton B: X+34, Y+63\r\nPrize: X=6163, Y=18596\r\n\r\nButton A: X+62, Y+47\r\nButton B: X+23, Y+59\r\nPrize: X=6204, Y=6615\r\n\r\nButton A: X+72, Y+40\r\nButton B: X+24, Y+53\r\nPrize: X=2840, Y=12757\r\n\r\nButton A: X+16, Y+76\r\nButton B: X+81, Y+48\r\nPrize: X=2283, Y=7140\r\n\r\nButton A: X+39, Y+29\r\nButton B: X+19, Y+94\r\nPrize: X=2051, Y=7196\r\n\r\nButton A: X+18, Y+90\r\nButton B: X+78, Y+12\r\nPrize: X=3330, Y=6444\r\n\r\nButton A: X+63, Y+29\r\nButton B: X+19, Y+48\r\nPrize: X=2257, Y=13510\r\n\r\nButton A: X+73, Y+25\r\nButton B: X+41, Y+58\r\nPrize: X=8058, Y=5529\r\n\r\nButton A: X+28, Y+49\r\nButton B: X+48, Y+16\r\nPrize: X=464, Y=10676\r\n\r\nButton A: X+91, Y+15\r\nButton B: X+45, Y+77\r\nPrize: X=4951, Y=1999\r\n\r\nButton A: X+58, Y+39\r\nButton B: X+14, Y+41\r\nPrize: X=1346, Y=2895\r\n\r\nButton A: X+66, Y+29\r\nButton B: X+32, Y+92\r\nPrize: X=3548, Y=5378\r\n\r\nButton A: X+28, Y+66\r\nButton B: X+28, Y+12\r\nPrize: X=340, Y=18554\r\n\r\nButton A: X+66, Y+15\r\nButton B: X+53, Y+65\r\nPrize: X=9665, Y=6380\r\n\r\nButton A: X+79, Y+59\r\nButton B: X+29, Y+68\r\nPrize: X=3396, Y=4807\r\n\r\nButton A: X+24, Y+53\r\nButton B: X+94, Y+52\r\nPrize: X=9444, Y=6853\r\n\r\nButton A: X+29, Y+19\r\nButton B: X+17, Y+35\r\nPrize: X=14262, Y=2514\r\n\r\nButton A: X+42, Y+96\r\nButton B: X+96, Y+48\r\nPrize: X=13398, Y=13824\r\n\r\nButton A: X+76, Y+19\r\nButton B: X+68, Y+69\r\nPrize: X=8672, Y=7056\r\n\r\nButton A: X+75, Y+56\r\nButton B: X+29, Y+78\r\nPrize: X=341, Y=480\r\n\r\nButton A: X+17, Y+81\r\nButton B: X+79, Y+69\r\nPrize: X=2168, Y=8178\r\n\r\nButton A: X+20, Y+43\r\nButton B: X+66, Y+43\r\nPrize: X=5486, Y=2542\r\n\r\nButton A: X+24, Y+54\r\nButton B: X+63, Y+24\r\nPrize: X=19280, Y=13064\r\n\r\nButton A: X+52, Y+31\r\nButton B: X+12, Y+37\r\nPrize: X=1224, Y=3878\r\n\r\nButton A: X+12, Y+39\r\nButton B: X+66, Y+21\r\nPrize: X=1682, Y=7874\r\n\r\nButton A: X+61, Y+28\r\nButton B: X+29, Y+82\r\nPrize: X=7198, Y=7494\r\n\r\nButton A: X+92, Y+12\r\nButton B: X+58, Y+84\r\nPrize: X=7690, Y=7500\r\n\r\nButton A: X+39, Y+12\r\nButton B: X+49, Y+98\r\nPrize: X=5665, Y=5060\r\n\r\nButton A: X+81, Y+46\r\nButton B: X+31, Y+55\r\nPrize: X=8234, Y=5424\r\n\r\nButton A: X+48, Y+12\r\nButton B: X+39, Y+65\r\nPrize: X=1884, Y=2460\r\n\r\nButton A: X+62, Y+20\r\nButton B: X+21, Y+93\r\nPrize: X=6552, Y=7632\r\n\r\nButton A: X+84, Y+19\r\nButton B: X+24, Y+54\r\nPrize: X=8712, Y=3622\r\n\r\nButton A: X+53, Y+76\r\nButton B: X+57, Y+15\r\nPrize: X=3011, Y=2716\r\n\r\nButton A: X+30, Y+57\r\nButton B: X+48, Y+19\r\nPrize: X=1784, Y=14161\r\n\r\nButton A: X+61, Y+14\r\nButton B: X+64, Y+65\r\nPrize: X=3234, Y=2805\r\n\r\nButton A: X+49, Y+31\r\nButton B: X+18, Y+40\r\nPrize: X=2647, Y=2533\r\n\r\nButton A: X+14, Y+88\r\nButton B: X+54, Y+27\r\nPrize: X=3990, Y=3210\r\n\r\nButton A: X+69, Y+51\r\nButton B: X+12, Y+31\r\nPrize: X=11225, Y=9085\r\n\r\nButton A: X+79, Y+18\r\nButton B: X+21, Y+73\r\nPrize: X=8268, Y=7955\r\n\r\nButton A: X+75, Y+22\r\nButton B: X+17, Y+61\r\nPrize: X=6430, Y=15836\r\n\r\nButton A: X+59, Y+34\r\nButton B: X+31, Y+54\r\nPrize: X=4077, Y=17906\r\n\r\nButton A: X+73, Y+93\r\nButton B: X+82, Y+28\r\nPrize: X=7108, Y=8826\r\n\r\nButton A: X+22, Y+11\r\nButton B: X+26, Y+60\r\nPrize: X=12006, Y=10214\r\n\r\nButton A: X+49, Y+64\r\nButton B: X+77, Y+25\r\nPrize: X=7098, Y=4661\r\n\r\nButton A: X+53, Y+12\r\nButton B: X+32, Y+67\r\nPrize: X=4760, Y=14814\r\n\r\nButton A: X+84, Y+27\r\nButton B: X+41, Y+56\r\nPrize: X=3056, Y=3209\r\n\r\nButton A: X+76, Y+42\r\nButton B: X+26, Y+93\r\nPrize: X=6266, Y=4485\r\n\r\nButton A: X+24, Y+54\r\nButton B: X+99, Y+19\r\nPrize: X=9114, Y=6244\r\n\r\nButton A: X+16, Y+33\r\nButton B: X+45, Y+20\r\nPrize: X=4137, Y=14366\r\n\r\nButton A: X+55, Y+77\r\nButton B: X+87, Y+35\r\nPrize: X=10600, Y=8764\r\n\r\nButton A: X+16, Y+34\r\nButton B: X+49, Y+34\r\nPrize: X=5222, Y=15068\r\n\r\nButton A: X+57, Y+45\r\nButton B: X+15, Y+83\r\nPrize: X=4488, Y=6176\r\n\r\nButton A: X+56, Y+17\r\nButton B: X+15, Y+47\r\nPrize: X=3199, Y=3051\r\n\r\nButton A: X+63, Y+64\r\nButton B: X+19, Y+92\r\nPrize: X=2320, Y=3520\r\n\r\nButton A: X+43, Y+21\r\nButton B: X+36, Y+59\r\nPrize: X=321, Y=17032\r\n\r\nButton A: X+30, Y+99\r\nButton B: X+97, Y+80\r\nPrize: X=11103, Y=12870\r\n\r\nButton A: X+24, Y+64\r\nButton B: X+82, Y+19\r\nPrize: X=7820, Y=6078\r\n\r\nButton A: X+11, Y+48\r\nButton B: X+80, Y+14\r\nPrize: X=1533, Y=15126\r\n\r\nButton A: X+76, Y+26\r\nButton B: X+35, Y+94\r\nPrize: X=707, Y=652\r\n\r\nButton A: X+86, Y+31\r\nButton B: X+46, Y+97\r\nPrize: X=7996, Y=8592\r\n\r\nButton A: X+93, Y+60\r\nButton B: X+27, Y+65\r\nPrize: X=6318, Y=7835\r\n\r\nButton A: X+38, Y+58\r\nButton B: X+44, Y+15\r\nPrize: X=6250, Y=2762\r\n\r\nButton A: X+40, Y+12\r\nButton B: X+11, Y+55\r\nPrize: X=3889, Y=4217\r\n\r\nButton A: X+33, Y+82\r\nButton B: X+80, Y+53\r\nPrize: X=3580, Y=5980\r\n\r\nButton A: X+83, Y+34\r\nButton B: X+11, Y+43\r\nPrize: X=15040, Y=11940\r\n\r\nButton A: X+38, Y+18\r\nButton B: X+18, Y+56\r\nPrize: X=14090, Y=16782\r\n\r\nButton A: X+11, Y+90\r\nButton B: X+60, Y+28\r\nPrize: X=851, Y=5574\r\n\r\nButton A: X+50, Y+92\r\nButton B: X+25, Y+15\r\nPrize: X=4250, Y=7076\r\n\r\nButton A: X+82, Y+31\r\nButton B: X+43, Y+64\r\nPrize: X=5186, Y=6353\r\n\r\nButton A: X+23, Y+72\r\nButton B: X+83, Y+15\r\nPrize: X=2540, Y=1341\r\n\r\nButton A: X+43, Y+12\r\nButton B: X+25, Y+67\r\nPrize: X=3804, Y=10047\r\n\r\nButton A: X+27, Y+69\r\nButton B: X+61, Y+13\r\nPrize: X=16290, Y=7488\r\n\r\nButton A: X+91, Y+75\r\nButton B: X+26, Y+94\r\nPrize: X=4069, Y=4805\r\n\r\nButton A: X+50, Y+29\r\nButton B: X+24, Y+64\r\nPrize: X=5956, Y=6910\r\n\r\nButton A: X+26, Y+55\r\nButton B: X+53, Y+17\r\nPrize: X=18494, Y=8684\r\n\r\nButton A: X+41, Y+96\r\nButton B: X+74, Y+15\r\nPrize: X=3241, Y=6006\r\n\r\nButton A: X+27, Y+65\r\nButton B: X+59, Y+19\r\nPrize: X=12190, Y=2148\r\n\r\nButton A: X+14, Y+33\r\nButton B: X+71, Y+50\r\nPrize: X=17433, Y=8665\r\n\r\nButton A: X+78, Y+24\r\nButton B: X+67, Y+86\r\nPrize: X=6291, Y=4878\r\n\r\nButton A: X+18, Y+55\r\nButton B: X+38, Y+19\r\nPrize: X=1276, Y=1102\r\n\r\nButton A: X+14, Y+48\r\nButton B: X+87, Y+34\r\nPrize: X=4983, Y=3606\r\n\r\nButton A: X+41, Y+18\r\nButton B: X+47, Y+74\r\nPrize: X=784, Y=16956\r\n\r\nButton A: X+12, Y+29\r\nButton B: X+34, Y+24\r\nPrize: X=8084, Y=19652\r\n\r\nButton A: X+15, Y+33\r\nButton B: X+54, Y+16\r\nPrize: X=5403, Y=2429\r\n\r\nButton A: X+65, Y+13\r\nButton B: X+37, Y+60\r\nPrize: X=4951, Y=3778\r\n\r\nButton A: X+67, Y+12\r\nButton B: X+13, Y+46\r\nPrize: X=178, Y=18460\r\n\r\nButton A: X+53, Y+27\r\nButton B: X+20, Y+35\r\nPrize: X=18652, Y=9013\r\n\r\nButton A: X+72, Y+22\r\nButton B: X+16, Y+73\r\nPrize: X=9136, Y=11212\r\n\r\nButton A: X+59, Y+17\r\nButton B: X+11, Y+54\r\nPrize: X=13838, Y=11591\r\n\r\nButton A: X+87, Y+16\r\nButton B: X+82, Y+86\r\nPrize: X=6382, Y=4436\r\n\r\nButton A: X+51, Y+68\r\nButton B: X+89, Y+11\r\nPrize: X=8013, Y=2286\r\n\r\nButton A: X+59, Y+73\r\nButton B: X+99, Y+21\r\nPrize: X=9743, Y=4849\r\n\r\nButton A: X+79, Y+29\r\nButton B: X+14, Y+59\r\nPrize: X=19205, Y=10390\r\n\r\nButton A: X+44, Y+17\r\nButton B: X+49, Y+77\r\nPrize: X=2003, Y=6114\r\n\r\nButton A: X+44, Y+66\r\nButton B: X+41, Y+20\r\nPrize: X=11492, Y=18020\r\n\r\nButton A: X+35, Y+88\r\nButton B: X+96, Y+36\r\nPrize: X=2150, Y=3352\r\n\r\nButton A: X+94, Y+87\r\nButton B: X+14, Y+94\r\nPrize: X=5270, Y=7633\r\n\r\nButton A: X+12, Y+23\r\nButton B: X+43, Y+20\r\nPrize: X=9644, Y=11686\r\n\r\nButton A: X+32, Y+13\r\nButton B: X+12, Y+49\r\nPrize: X=18252, Y=16126\r\n\r\nButton A: X+16, Y+42\r\nButton B: X+71, Y+33\r\nPrize: X=8373, Y=8735\r\n\r\nButton A: X+29, Y+65\r\nButton B: X+55, Y+25\r\nPrize: X=1431, Y=16935\r\n\r\nButton A: X+17, Y+58\r\nButton B: X+72, Y+14\r\nPrize: X=13571, Y=7996\r\n\r\nButton A: X+78, Y+21\r\nButton B: X+40, Y+47\r\nPrize: X=8396, Y=4072\r\n\r\nButton A: X+37, Y+12\r\nButton B: X+31, Y+64\r\nPrize: X=16636, Y=648\r\n\r\nButton A: X+54, Y+13\r\nButton B: X+12, Y+60\r\nPrize: X=15632, Y=14502\r\n\r\nButton A: X+26, Y+49\r\nButton B: X+92, Y+19\r\nPrize: X=5172, Y=2028\r\n\r\nButton A: X+41, Y+15\r\nButton B: X+24, Y+49\r\nPrize: X=6226, Y=9716\r\n\r\nButton A: X+63, Y+11\r\nButton B: X+44, Y+96\r\nPrize: X=9229, Y=7617\r\n\r\nButton A: X+24, Y+26\r\nButton B: X+21, Y+99\r\nPrize: X=2205, Y=9785\r\n\r\nButton A: X+17, Y+47\r\nButton B: X+58, Y+13\r\nPrize: X=16202, Y=19142\r\n\r\nButton A: X+27, Y+99\r\nButton B: X+97, Y+30\r\nPrize: X=6581, Y=3939\r\n\r\nButton A: X+70, Y+54\r\nButton B: X+15, Y+64\r\nPrize: X=5460, Y=9350\r\n\r\nButton A: X+79, Y+50\r\nButton B: X+13, Y+89\r\nPrize: X=3496, Y=5282\r\n\r\nButton A: X+15, Y+57\r\nButton B: X+45, Y+41\r\nPrize: X=4080, Y=4454\r\n\r\nButton A: X+92, Y+26\r\nButton B: X+33, Y+61\r\nPrize: X=5002, Y=4204\r\n\r\nButton A: X+66, Y+73\r\nButton B: X+11, Y+85\r\nPrize: X=5060, Y=8073\r\n\r\nButton A: X+12, Y+39\r\nButton B: X+75, Y+24\r\nPrize: X=16901, Y=1154\r\n\r\nButton A: X+22, Y+57\r\nButton B: X+74, Y+36\r\nPrize: X=6390, Y=16448\r\n\r\nButton A: X+86, Y+66\r\nButton B: X+96, Y+12\r\nPrize: X=11650, Y=6042\r\n\r\nButton A: X+69, Y+29\r\nButton B: X+12, Y+20\r\nPrize: X=1350, Y=702\r\n\r\nButton A: X+64, Y+33\r\nButton B: X+15, Y+50\r\nPrize: X=19462, Y=10104\r\n\r\nButton A: X+34, Y+61\r\nButton B: X+48, Y+27\r\nPrize: X=2806, Y=13249\r\n\r\nButton A: X+74, Y+25\r\nButton B: X+11, Y+65\r\nPrize: X=837, Y=3615\r\n\r\nButton A: X+26, Y+49\r\nButton B: X+70, Y+37\r\nPrize: X=2228, Y=1636\r\n\r\nButton A: X+91, Y+14\r\nButton B: X+21, Y+62\r\nPrize: X=8806, Y=5880\r\n\r\nButton A: X+59, Y+14\r\nButton B: X+25, Y+77\r\nPrize: X=704, Y=10448\r\n\r\nButton A: X+12, Y+30\r\nButton B: X+65, Y+17\r\nPrize: X=6384, Y=2742\r\n\r\nButton A: X+13, Y+89\r\nButton B: X+42, Y+16\r\nPrize: X=687, Y=2531\r\n\r\nButton A: X+30, Y+69\r\nButton B: X+55, Y+17\r\nPrize: X=11710, Y=11517\r\n\r\nButton A: X+78, Y+16\r\nButton B: X+33, Y+44\r\nPrize: X=8538, Y=5400\r\n\r\nButton A: X+11, Y+75\r\nButton B: X+34, Y+14\r\nPrize: X=2082, Y=6354\r\n\r\nButton A: X+25, Y+60\r\nButton B: X+90, Y+38\r\nPrize: X=7275, Y=5890\r\n\r\nButton A: X+25, Y+36\r\nButton B: X+96, Y+32\r\nPrize: X=5451, Y=1900\r\n\r\nButton A: X+17, Y+60\r\nButton B: X+40, Y+26\r\nPrize: X=2358, Y=6134\r\n\r\nButton A: X+28, Y+84\r\nButton B: X+18, Y+12\r\nPrize: X=3248, Y=7980\r\n\r\nButton A: X+52, Y+24\r\nButton B: X+33, Y+58\r\nPrize: X=421, Y=9666\r\n\r\nButton A: X+52, Y+18\r\nButton B: X+21, Y+70\r\nPrize: X=16037, Y=10690\r\n\r\nButton A: X+64, Y+22\r\nButton B: X+25, Y+62\r\nPrize: X=17777, Y=14710\r\n\r\nButton A: X+29, Y+39\r\nButton B: X+80, Y+30\r\nPrize: X=4630, Y=2580\r\n\r\nButton A: X+41, Y+13\r\nButton B: X+21, Y+61\r\nPrize: X=1563, Y=17115\r\n\r\nButton A: X+21, Y+68\r\nButton B: X+31, Y+20\r\nPrize: X=1670, Y=2112\r\n\r\nButton A: X+11, Y+67\r\nButton B: X+43, Y+16\r\nPrize: X=2704, Y=2453\r\n\r\nButton A: X+19, Y+33\r\nButton B: X+54, Y+23\r\nPrize: X=7256, Y=13017\r\n\r\nButton A: X+52, Y+24\r\nButton B: X+24, Y+63\r\nPrize: X=1148, Y=1101\r\n\r\nButton A: X+15, Y+70\r\nButton B: X+92, Y+53\r\nPrize: X=7592, Y=6828\r\n\r\nButton A: X+23, Y+69\r\nButton B: X+42, Y+12\r\nPrize: X=15629, Y=1997\r\n\r\nButton A: X+47, Y+24\r\nButton B: X+12, Y+36\r\nPrize: X=10965, Y=2144\r\n\r\nButton A: X+33, Y+66\r\nButton B: X+91, Y+23\r\nPrize: X=6755, Y=4129\r\n\r\nButton A: X+14, Y+30\r\nButton B: X+49, Y+13\r\nPrize: X=16755, Y=17087\r\n\r\nButton A: X+95, Y+33\r\nButton B: X+20, Y+27\r\nPrize: X=3095, Y=2559\r\n\r\nButton A: X+50, Y+20\r\nButton B: X+17, Y+31\r\nPrize: X=4386, Y=6848\r\n\r\nButton A: X+66, Y+49\r\nButton B: X+16, Y+72\r\nPrize: X=1250, Y=1409\r\n\r\nButton A: X+35, Y+57\r\nButton B: X+62, Y+11\r\nPrize: X=3468, Y=5288\r\n\r\nButton A: X+18, Y+56\r\nButton B: X+72, Y+62\r\nPrize: X=7488, Y=8716\r\n\r\nButton A: X+56, Y+12\r\nButton B: X+71, Y+88\r\nPrize: X=5253, Y=1344\r\n\r\nButton A: X+22, Y+74\r\nButton B: X+46, Y+17\r\nPrize: X=1096, Y=2447\r\n\r\nButton A: X+62, Y+11\r\nButton B: X+17, Y+41\r\nPrize: X=12845, Y=8465\r\n\r\nButton A: X+57, Y+32\r\nButton B: X+18, Y+44\r\nPrize: X=10682, Y=11104\r\n\r\nButton A: X+59, Y+22\r\nButton B: X+17, Y+36\r\nPrize: X=17847, Y=676\r\n\r\nButton A: X+60, Y+19\r\nButton B: X+22, Y+55\r\nPrize: X=5552, Y=5889\r\n\r\nButton A: X+78, Y+31\r\nButton B: X+38, Y+91\r\nPrize: X=7090, Y=6385\r\n\r\nButton A: X+57, Y+17\r\nButton B: X+12, Y+53\r\nPrize: X=2648, Y=10825\r\n\r\nButton A: X+75, Y+18\r\nButton B: X+56, Y+78\r\nPrize: X=10535, Y=8016\r\n\r\nButton A: X+29, Y+69\r\nButton B: X+84, Y+57\r\nPrize: X=8317, Y=7074\r\n\r\nButton A: X+43, Y+47\r\nButton B: X+13, Y+85\r\nPrize: X=1327, Y=3291\r\n\r\nButton A: X+27, Y+93\r\nButton B: X+78, Y+73\r\nPrize: X=2388, Y=7247\r\n\r\nButton A: X+17, Y+87\r\nButton B: X+42, Y+11\r\nPrize: X=2051, Y=1115\r\n\r\nButton A: X+28, Y+88\r\nButton B: X+82, Y+54\r\nPrize: X=4906, Y=4622\r\n\r\nButton A: X+56, Y+26\r\nButton B: X+28, Y+55\r\nPrize: X=13724, Y=10187\r\n\r\nButton A: X+21, Y+80\r\nButton B: X+73, Y+48\r\nPrize: X=2667, Y=5328\r\n\r\nButton A: X+18, Y+43\r\nButton B: X+48, Y+22\r\nPrize: X=19340, Y=7120\r\n\r\nButton A: X+41, Y+17\r\nButton B: X+16, Y+35\r\nPrize: X=6754, Y=13263\r\n\r\nButton A: X+98, Y+20\r\nButton B: X+12, Y+45\r\nPrize: X=5984, Y=4370\r\n\r\nButton A: X+15, Y+44\r\nButton B: X+52, Y+17\r\nPrize: X=3745, Y=9607\r\n\r\nButton A: X+92, Y+15\r\nButton B: X+81, Y+96\r\nPrize: X=9203, Y=7710\r\n\r\nButton A: X+12, Y+57\r\nButton B: X+64, Y+13\r\nPrize: X=4484, Y=10370\r\n\r\nButton A: X+46, Y+67\r\nButton B: X+98, Y+28\r\nPrize: X=6928, Y=5157\r\n\r\nButton A: X+14, Y+51\r\nButton B: X+45, Y+15\r\nPrize: X=16789, Y=11141\r\n\r\nButton A: X+20, Y+73\r\nButton B: X+73, Y+21\r\nPrize: X=8198, Y=7370\r\n\r\nButton A: X+30, Y+61\r\nButton B: X+34, Y+18\r\nPrize: X=268, Y=10346\r\n\r\nButton A: X+74, Y+58\r\nButton B: X+18, Y+64\r\nPrize: X=3070, Y=6198\r\n\r\nButton A: X+96, Y+17\r\nButton B: X+29, Y+40\r\nPrize: X=7524, Y=4261\r\n\r\nButton A: X+49, Y+12\r\nButton B: X+33, Y+50\r\nPrize: X=4535, Y=4506\r\n\r\nButton A: X+34, Y+94\r\nButton B: X+66, Y+28\r\nPrize: X=4518, Y=9556\r\n\r\nButton A: X+62, Y+14\r\nButton B: X+13, Y+45\r\nPrize: X=17544, Y=11592\r\n\r\nButton A: X+25, Y+65\r\nButton B: X+52, Y+19\r\nPrize: X=13254, Y=16163\r\n\r\nButton A: X+56, Y+11\r\nButton B: X+11, Y+49\r\nPrize: X=466, Y=1122\r\n\r\nButton A: X+22, Y+42\r\nButton B: X+79, Y+46\r\nPrize: X=9977, Y=8670\r\n\r\nButton A: X+11, Y+18\r\nButton B: X+75, Y+24\r\nPrize: X=1348, Y=1416\r\n\r\nButton A: X+13, Y+48\r\nButton B: X+83, Y+39\r\nPrize: X=7803, Y=9032\r\n\r\nButton A: X+56, Y+90\r\nButton B: X+83, Y+37\r\nPrize: X=7239, Y=4983\r\n\r\nButton A: X+55, Y+85\r\nButton B: X+68, Y+21\r\nPrize: X=5755, Y=5110\r\n\r\nButton A: X+21, Y+71\r\nButton B: X+31, Y+11\r\nPrize: X=1822, Y=11412\r\n\r\nButton A: X+49, Y+26\r\nButton B: X+16, Y+50\r\nPrize: X=2454, Y=2740\r\n\r\nButton A: X+49, Y+29\r\nButton B: X+23, Y+96\r\nPrize: X=3636, Y=8331\r\n\r\nButton A: X+96, Y+86\r\nButton B: X+79, Y+13\r\nPrize: X=7420, Y=6416\r\n\r\nButton A: X+59, Y+28\r\nButton B: X+19, Y+54\r\nPrize: X=4064, Y=3728\r\n\r\nButton A: X+57, Y+25\r\nButton B: X+14, Y+29\r\nPrize: X=19145, Y=7622\r\n\r\nButton A: X+23, Y+58\r\nButton B: X+45, Y+16\r\nPrize: X=12583, Y=4618\r\n\r\nButton A: X+16, Y+54\r\nButton B: X+37, Y+12\r\nPrize: X=8060, Y=12920\r\n\r\nButton A: X+46, Y+80\r\nButton B: X+90, Y+31\r\nPrize: X=6600, Y=4198\r\n\r\nButton A: X+14, Y+46\r\nButton B: X+47, Y+26\r\nPrize: X=14143, Y=13316\r\n\r\nButton A: X+31, Y+60\r\nButton B: X+56, Y+23\r\nPrize: X=3981, Y=2155\r\n\r\nButton A: X+39, Y+44\r\nButton B: X+97, Y+19\r\nPrize: X=9231, Y=4717\r\n\r\nButton A: X+24, Y+15\r\nButton B: X+14, Y+54\r\nPrize: X=1642, Y=4782\r\n\r\nButton A: X+34, Y+78\r\nButton B: X+64, Y+35\r\nPrize: X=6902, Y=8230\r\n\r\nButton A: X+56, Y+20\r\nButton B: X+42, Y+79\r\nPrize: X=19184, Y=14312\r\n\r\nButton A: X+35, Y+16\r\nButton B: X+13, Y+30\r\nPrize: X=2383, Y=13964\r\n\r\nButton A: X+34, Y+15\r\nButton B: X+13, Y+55\r\nPrize: X=13359, Y=18215\r\n\r\nButton A: X+27, Y+71\r\nButton B: X+52, Y+19\r\nPrize: X=12500, Y=2996\r\n\r\nButton A: X+58, Y+39\r\nButton B: X+13, Y+87\r\nPrize: X=1748, Y=2271\r\n\r\nButton A: X+28, Y+87\r\nButton B: X+78, Y+67\r\nPrize: X=9056, Y=13759\r\n\r\nButton A: X+73, Y+12\r\nButton B: X+20, Y+80\r\nPrize: X=10173, Y=7612\r\n\r\nButton A: X+97, Y+11\r\nButton B: X+94, Y+89\r\nPrize: X=7821, Y=1827\r\n\r\nButton A: X+68, Y+31\r\nButton B: X+17, Y+59\r\nPrize: X=18366, Y=11187\r\n\r\nButton A: X+57, Y+23\r\nButton B: X+17, Y+52\r\nPrize: X=13825, Y=12069\r\n\r\nButton A: X+22, Y+53\r\nButton B: X+47, Y+11\r\nPrize: X=14956, Y=8137\r\n\r\nButton A: X+81, Y+33\r\nButton B: X+23, Y+84\r\nPrize: X=1040, Y=1170\r\n\r\nButton A: X+23, Y+53\r\nButton B: X+41, Y+22\r\nPrize: X=16399, Y=18188\r\n\r\nButton A: X+37, Y+98\r\nButton B: X+57, Y+28\r\nPrize: X=1637, Y=3598\r\n\r\nButton A: X+98, Y+94\r\nButton B: X+11, Y+68\r\nPrize: X=3945, Y=5450\r\n\r\nButton A: X+39, Y+74\r\nButton B: X+54, Y+14\r\nPrize: X=18281, Y=12246\r\n\r\nButton A: X+29, Y+13\r\nButton B: X+45, Y+75\r\nPrize: X=11083, Y=10911\r\n\r\nButton A: X+20, Y+72\r\nButton B: X+72, Y+20\r\nPrize: X=7604, Y=12284\r\n\r\nButton A: X+45, Y+20\r\nButton B: X+23, Y+64\r\nPrize: X=2702, Y=3836")
    {
        private List<string> machines;

        protected override void Solve()
        {
            machines = input.Split("\r\n\r\n").ToList();
            foreach (string machine in machines)
            {
                Match match = Regex.Match(machine, "Button A: X.([0-9]+), Y.([0-9]+)\r\nButton B: X.([0-9]+), Y.([0-9]+)\r\nPrize: X=([0-9]+), Y=([0-9]+)");
                long ax = long.Parse(match.Groups[1].Value), ay = long.Parse(match.Groups[2].Value);
                long bx = long.Parse(match.Groups[3].Value), by = long.Parse(match.Groups[4].Value);
                long px = long.Parse(match.Groups[5].Value), py = long.Parse(match.Groups[6].Value);
                //Console.WriteLine($"{ax} {ay} {bx} {by} {px} {py}");
                result += SolveMachine(ax, ay, bx, by, px + (part2 ? 10000000000000 : 0), py + (part2 ? 10000000000000 : 0));
            }
        }

        private long SolveMachine(long ax, long ay, long bx, long by, long px, long py)
        {
            long determinant = ax * by - ay * bx;
            if (determinant == 0) { return 0; }

            /*
            long minCost = long.MaxValue;
            long maxA = Math.Min(px / ax + 1, py / ay + 1);
            long maxB = Math.Min(px / bx + 1, py / by + 1);
            long minA = part1 ? 0 : maxA - Math.Abs(maxA - maxB);
            long minB = part1 ? 0 : maxB - Math.Abs(maxB - maxA);
            if (part1) { maxA = Math.Clamp(maxA, 0, 100); maxB = Math.Clamp(maxB, 0, 100); }
            for (long i = minA; i < maxA; i++)
            {
                long j = (px - ax * i) / bx;
                if (ax * i + bx * j == px && ay * i + by * j == py)
                {
                    minCost = Math.Min(minCost, i * 3 + j);
                }
            }

            //brute force i guess
            //for (long j = minA; j < maxB; j++)
            //{
            //    for (long i = minB; i < maxA; i++)
            //    {
            //        long cx = ax * i + bx * j, cy = ay * i + by * j;
            //        if (cx == px && cy == py)
            //        {
            //            minCost = Math.Min(minCost, i * 3 + j);
            //            Console.WriteLine(minCost);
            //        }
            //    }
            //}
            return minCost == long.MaxValue ? 0 : minCost;*/
            // I swear I solved the system 800 times
            long j = (py * ax - px * ay) / (by * ax - bx * ay);
            long i = (px - j * bx) / ax;
            if (ax * i + bx * j == px && ay * i + by * j == py)
            {
                return 3 * i + j;
            }
            return 0;
        }
    }
}
